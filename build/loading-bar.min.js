/*! 
 * angular-loading-bar v0.9.3
 * https://chieffancypants.github.io/angular-loading-bar
 * Copyright (c) 2017 Wes Cruver
 * License: MIT
 */
!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(a){var b=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(b,c,d,e,f,g){function h(a){if(p&&p.length>0)for(var b=0;b<p.length;b++)if(a.match(p[b]))return!0;return!1}function i(a){d.cancel(l),g.completeWithSuccess(a),n=0,m=0}function j(){d.cancel(l),g.complete(),n=0,m=0}function k(b){var d,e=c.get("$http"),f=a.defaults;!b.cache&&!f.cache||!1===b.cache||"GET"!==b.method&&"JSONP"!==b.method||(d=angular.isObject(b.cache)?b.cache:angular.isObject(f.cache)?f.cache:e);var g=void 0!==d&&void 0!==d.get(b.url);return void 0!==b.cached&&g!==b.cached?b.cached:(b.cached=g,g)}var l,m=0,n=0,o=g.latencyThreshold,p=g.skipGetUrls;return{request:function(a){if(!h(a.url)&&!a.ignoreLoadingBar&&!k(a)){e.$broadcast("cfpLoadingBar:loading",{url:a.url});a.url;0===m&&(l=d(function(){g.start()},o)),m++,g.set(n/m)}return a},response:function(a){return a&&a.config?(h(a.config.url)||a.config.ignoreLoadingBar||k(a.config)||++n>=m&&(e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),"POST"!=a.config.method&&"PUT"!=a.config.method||200!=a.status||a.config.skipSuccess?j():i(a.config.url),g.set(n/m)),a):(f.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),a)},responseError:function(a){return a&&a.config?(h(a.config.url)||a.config.ignoreLoadingBar||k(a.config)||(n++,n>=m?(e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),j()):g.set(n/m)),b.reject(a)):(f.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),b.reject(a))}}}];a.interceptors.push(b)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.sucessTickTime=1e3,this.skipUrls=[],this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.spinnerSuccessTemplate="<div>You are done!!</div>",this.$get=["$injector","$document","$timeout","$rootScope",function(a,b,c,d){function e(){if(m||(m=a.get("$animate")),c.cancel(o),!t){var e=b[0],g=e.querySelector?e.querySelector(p):b.find(p)[0];g||(g=e.getElementsByTagName("body")[0]);var h=angular.element(g),i=g.lastChild&&angular.element(g.lastChild);d.$broadcast("cfpLoadingBar:started"),t=!0,x&&m.enter(q,h,i),w&&m.enter(s,h,q),f(y)}}function f(a){if(t){var b=100*a+"%";r.css("width",b),u=a,v&&(c.cancel(n),n=c(function(){g()},250))}}function g(){if(!(h()>=1)){var a=0,b=h();a=b>=0&&b<.25?(3*Math.random()+3)/100:b>=.25&&b<.65?3*Math.random()/100:b>=.65&&b<.9?2*Math.random()/100:b>=.9&&b<.99?.005:0;f(h()+a)}}function h(){return u}function i(){u=0,t=!1}function j(a){if(z&&z.length>0)for(var b=0;b<z.length;b++)if(a.match(z[b]))return!0;return!1}function k(e){var g=b[0],h=g.querySelector?g.querySelector(p):b.find(p)[0];h||(h=g.getElementsByTagName("body")[0]);var k=angular.element(h);m||(m=a.get("$animate")),f(1),c.cancel(o),o=c(function(){var a=m.leave(q,i);a&&a.then&&a.then(i),m.leave(s),d.$broadcast("cfpLoadingBar:completed")},500);var l=angular.element(this.spinnerSuccessTemplate);j(e)||(m.enter(l,k,q),c(function(){m.leave(l)},this.sucessTickTime))}function l(){m||(m=a.get("$animate")),f(1),c.cancel(o),o=c(function(){var a=m.leave(q,i);a&&a.then&&a.then(i),m.leave(s),d.$broadcast("cfpLoadingBar:completed")},500)}var m,n,o,p=this.parentSelector,q=angular.element(this.loadingBarTemplate),r=q.find("div").eq(0),s=angular.element(this.spinnerTemplate),t=!1,u=0,v=this.autoIncrement,w=this.includeSpinner,x=this.includeBar,y=this.startSize,z=this.skipUrls;this.skipGetUrls;return{start:e,set:f,status:h,inc:g,complete:l,completeWithSuccess:k,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize,spinnerSuccessTemplate:this.spinnerSuccessTemplate,sucessTickTime:this.sucessTickTime,skipUrls:this.skipUrls,skipGetUrls:this.skipGetUrls}}]})}();